javascript:(function(){try{if(window.__recorderState){window.__recorderState.save();return}if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia){console.error('HTTPS required');return}if(!window.ysFixWebmDuration){var s=document.createElement('script');s.src='https://unpkg.com/fix-webm-duration@1.0.5/fix-webm-duration.js';document.body.appendChild(s)}var state={r1:{mr:null,c:[],s:0,t:null},r2:{mr:null,c:[],s:0,t:null},str:null,req:null};function init(id,str){var r=id===1?state.r1:state.r2;if(r.t)clearTimeout(r.t);var m=[%27video/webm;codecs=vp9%27,%27video/webm%27,%27video/mp4%27].find(function(t){return MediaRecorder.isTypeSupported(t)});if(!m){console.error(%27No mime%27);return}r.mr=new MediaRecorder(str,{mimeType:m});r.c=[];r.s=Date.now();r.mr.ondataavailable=function(e){if(e.data.size>0)r.c.push(e.data)};r.mr.onstop=function(){if(state.req===id){var b=new Blob(r.c,{type:r.mr.mimeType});var x=m.includes(%27mp4%27)?%27mp4%27:%27webm%27;if(x===%27webm%27&&window.ysFixWebmDuration){window.ysFixWebmDuration(b,Date.now()-r.s,function(f){dl(f,x)})}else{dl(b,x)}state.req=null}if(state.str&&state.str.getTracks().some(function(t){return t.readyState===%27live%27}))init(id,str)};r.mr.start(1000);r.t=setTimeout(function(){if(r.mr.state!==%27inactive%27)r.mr.stop()},30000)}function dl(b,x){var a=document.createElement(%27a%27);a.href=URL.createObjectURL(b);a.download=new Date().toISOString()+%27-replay.%27+x;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(a.href)},100)}navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},audio:true,preferCurrentTab:true,selfBrowserSurface:"include",surfaceSwitching:"include",systemAudio:"include"}).then(function(s){state.str=s;s.getVideoTracks()[0].onended=function(){if(state.r1.t)clearTimeout(state.r1.t);if(state.r2.t)clearTimeout(state.r2.t);window.__recorderState=null};init(1,s);setTimeout(function(){if(s.getTracks().some(function(t){return t.readyState===%27live%27}))init(2,s)},15000);window.__recorderState={save:function(){var n=Date.now();var d1=state.r1.mr&&state.r1.mr.state===%27recording%27?n-state.r1.s:0;var d2=state.r2.mr&&state.r2.mr.state===%27recording%27?n-state.r2.s:0;var id=d1>=d2?1:2;var r=id===1?state.r1:state.r2;if(r.mr&&r.mr.state!==%27inactive%27){state.req=id;if(r.t)clearTimeout(r.t);r.mr.stop()}}}}).catch(function(e){console.error(%27Error:%27+e)})}catch(e){console.error(%27Bookmarklet Error:%27+e)}})()